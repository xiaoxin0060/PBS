<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xiaoxin.blog.web.app.mapper.ArticleMapper">

    <select id="getCategoryArticles" resultType="com.xiaoxin.blog.web.app.vo.ArticleListVo">
        SELECT
            a.id,
            a.title,
            a.cover_image   AS coverImage,
            c.name          AS categoryName,
            a.is_top        AS isTop,
            a.view_count    AS viewCount,
            a.like_count    AS likeCount,
            a.create_time   AS createTime
        FROM article a
                 LEFT JOIN category c ON c.id = a.category_id AND c.deleted = 0
        WHERE a.deleted = 0
          AND a.category_id = #{queryDto.categoryId}
          AND a.status = #{queryDto.status}
        ORDER BY a.is_top DESC, a.create_time DESC
    </select>
</mapper>
