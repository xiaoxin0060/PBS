
# Personal Blog System



## 项目概述

**Personal Blog System** 是一个基于现代技术栈的全栈个人博客/文章管理系统，旨在帮助用户轻松创建、管理和分享文章。项目支持用户注册/登录、文章发布/编辑、评论互动、图片上传、数据统计等功能，融入分布式中间件（如 Redis 用于缓存和会话管理、MinIO 用于对象存储、消息队列用于异步处理），以提升系统的性能、扩展性和安全性。

这个项目适合作为学习型全栈开发练手项目，覆盖 Java 后端主流技术点，包括 CRUD 操作、多表查询、异常处理、Token 认证、异步任务等。项目设计时考虑了高并发场景（如浏览量统计的异步解耦），并支持虚拟机部署和 Nginx 反向代理。

### 项目目标
- **功能完整**：实现博客核心功能，支持游客浏览、用户互动和管理员管理。
- **技术覆盖广**：锻炼 Spring Boot、Vue 前后端分离、数据库设计、中间件集成。


## 技术栈

### 后端
- **框架**：Spring Boot 3.x（核心框架）
- **数据库**：MySQL 8.x（数据存储），MyBatis-Plus（ORM 工具，支持复杂 SQL）
- **认证**：JWT（Token 基于登录验证）
- **中间件**：
  - **Redis**：缓存热门数据、存储验证码/会话、计数器（浏览/点赞）、限流（Redisson）
  - **MinIO**：对象存储，用于图片/文件上传（文章封面、用户头像等）
  - **消息队列**（RabbitMQ）：异步处理（如浏览量统计、通知推送、任务解耦）
- **其他**：Lombok（简化代码）、SpringDoc（OpenAPI 接口文档）、Sl4j（日志）、Global Exception Handler（异常处理）

### 前端
- **框架**：Vue 3 + Vue Router + Pinia（状态管理）
- **UI**：Element Plus / Ant Design Vue
- **其他**：Axios（HTTP 请求）、Markdown 编辑器（文章编辑）

### 部署与工具
- **服务器**：虚拟机（CentOS 7） + Nginx（反向代理）
- **构建**：Maven（后端） / Vite（前端）
- **开发工具**：IntelliJ IDEA / VS Code
- **版本控制**：Git

## 系统架构

### 高层架构图

- **前端**：Vue 3 应用，通过 API 调用后端接口。
- **后端**：Spring Boot 服务，处理业务逻辑。
- **数据库**：MySQL 主库
- **中间件层**：
  - Redis：缓存层，位于后端与数据库之间。
  - MinIO：文件存储服务，独立部署。
  - 消息队列：异步任务队列，解耦高并发操作。
- **部署**：前后端分离，Nginx 代理静态资源和 API 请求。

### 数据流示例
1. 用户发布文章 → 上传图片至 MinIO → 保存文章数据至 MySQL → 发送 MQ 消息异步更新热度。
2. 游客浏览文章 → Redis 缓存查询 → 如果缓存 miss，则查 MySQL 并缓存。

## 功能需求文档

### 1. 系统角色与权限
- **游客**：无需登录，可浏览文章、分类、标签、评论。
- **注册用户**：登录后可发布/编辑文章、评论、点赞、管理个人信息。
- **管理员**：额外权限包括审核文章/评论、用户管理、系统统计/配置。
- **权限实现**：JWT Token 认证 + 角色拦截。游客接口无需 Token，用户/管理员接口校验角色。

### 2. 核心功能模块

#### （1）用户模块
- **注册**：
  - 输入：用户名、邮箱、密码、验证码。
  - 校验：用户名/邮箱唯一、密码强度、验证码（Redis 存储，5 分钟过期）。
  - 输出：注册成功，返回 JWT Token。
- **登录**：
  - 输入：用户名/密码、验证码。
  - 过程：验证凭证，生成 JWT Token，存储会话至 Redis（过期时间 7 天）。
  - 输出：Token 和用户基本信息。
- **个人信息管理**：
  - 编辑用户名/邮箱/简介。
  - 上传头像：文件上传至 MinIO，返回 URL 更新数据库。
- **忘记密码**：
  - 发送邮箱验证码（Redis 存储），验证后重置密码。
- **中间件融入**：
  - **Redis**：存储验证码/会话 Token，防重放攻击；缓存用户资料（Hash 结构）。
  - **消息队列**：注册/登录成功后，异步发送欢迎通知。
  - **MinIO**：存储用户头像文件。

#### （2）文章管理
- **发布/编辑文章**：
  - 输入：标题、正文（Markdown 支持）、封面/配图、分类/标签。
  - 过程：上传图片至 MinIO，保存数据至 MySQL，状态设为“草稿”或“已发布”。
- **文章列表**：
  - 支持分页、排序（最新/热门）、过滤（分类/标签/关键词）。
  - 搜索：MySQL Like 或 Elasticsearch（可选）。
- **文章详情**：
  - 显示正文、浏览量、评论列表、点赞数。
  - 更新浏览量：异步投递 MQ 消息。
- **删除/审核文章**：
  - 管理员批量审核/软删除。
- **文章状态**：草稿/已发布/待审核/删除。
- **中间件融入**：
  - **Redis**：缓存文章列表/详情（String/Hash，TTL 1 小时）；实时浏览/点赞计数（Incr 操作）。
  - **MinIO**：存储封面/配图，返回 URL。
  - **消息队列**：发布后异步通知订阅者；浏览/点赞时投递消息，消费者批量更新 MySQL（防高并发锁）。

#### （3）分类与标签管理
- **分类**：
  - 增删改查，支持排序。
  - 1 篇文章属于 1 个主分类（可选多分类扩展）。
- **标签**：
  - 增删改查，多对多关联文章。
- **中间件融入**：
  - **Redis**：缓存分类/标签列表（List/Set 结构），加速下拉菜单查询。

#### （4）评论/点赞模块
- **评论**：
  - 发表评论/回复，支持嵌套（parent_id）。
  - 分页查询评论列表。
- **点赞**：
  - 对文章/评论点赞，防重复（Redis Set 判断）。
- **审核/删除**：
  - 管理员操作，支持批量。
- **防刷**：
  - 限流（Redis + Redisson）。
- **中间件融入**：
  - **Redis**：存储点赞记录/评论验证码；缓存热门评论（ZSet 排序）。
  - **消息队列**：评论/点赞后异步通知作者（e.g., 站内信）；异步审核队列。

#### （5）系统管理与统计
- **用户管理**：
  - 查询/封禁/权限分配。
- **统计**：
  - 文章 PV/UV、用户活跃度（Redis ZSet 热榜）。
  - 后台仪表盘显示。
- **系统配置**：
  - 编辑轮播图/公告（图片上传 MinIO）。
- **中间件融入**：
  - **Redis**：实时统计计数；缓存配置数据。
  - **消息队列**：异步聚合统计数据（e.g., 日/周报告落库）。
  - **MinIO**：存储配置图片。

#### （6）其他功能
- **搜索**：全文搜索文章标题/内容。
- **日志与异常**：全局异常捕获、SQL 日志（MyBatis-Plus StdOutImpl）。
- **接口文档**：SpringDoc 生成 Swagger UI（访问 /swagger-ui.html）。
- **安全**：参数校验（Validator）、防 SQL 注入（MyBatis）。

### 3. 非功能需求
- **性能**：接口响应 < 200ms，高频查询用 Redis 缓存；MQ 异步处理写操作。
- **安全性**：JWT 防篡改、HTTPS 支持、敏感数据加密（密码 Hash）。
- **可扩展性**：模块化设计，便于微服务拆分（e.g., 用户服务独立）。
- **可用性**：错误友好提示、日志监控。
- **兼容性**：支持主流浏览器，移动端响应式。

## 数据库设计

### 设计原则
- **引擎**：InnoDB（支持事务/外键）。
- **字符集**：utf8mb4（支持 Emoji）。
- **索引**：主键/唯一索引/外键，确保查询效率。
- **扩展**：预留字段，便于未来添加（如点赞表扩展）。
- **表关系**：
  - 用户 1:N 文章/评论。
  - 文章 1:1 分类，N:M 标签。
  - 评论 N:1 文章，支持自关联（嵌套评论）。


## 联系
- 作者： [Krisxin]

